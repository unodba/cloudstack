
本节提示如何提高云性能。

# 性能监控
终端用户和管理员都可以对主机和虚拟机进行性能监控。这允许用户监控他们的资源利用情况并决定在适当的时候选择更强大的服务方案和更大的磁盘。

# 增加管理服务器到最大内存
如果管理服务器用于高需求，默认JVM的最大内存分配可能不足。增加内存:

编辑Tomcat配置文件：

```bash
/etc/cloudstack/management/tomcat6.conf
```
改变命令行参数 -XmxNNNm中的N为更高的值。

例如，如果当前值为 -Xmx128m，则改为 -Xmx1024m或更高。将新的设置生效，重启管理服务。

```bash
# service cloudstack-management restart
```
欲了解更多管理内存问题的详细信息，请参阅”FAQ:内存” 在 Tomcat Wiki.

# 设置数据库缓冲池大小
为MySQL数据库提供足够的内存空间来缓存数据和索引是很重要的：

编辑MySQL配置文件：

```bash
vi /etc/my.cnf
//在[mysqld]部分的datadir下面插入如下行。使用适合您情况的值。如果MySQL和管理服务器在同一台服务器上面我们建议设置缓冲池为内存的40%，如果MySQL为专用的服务器我们建议设置为内存的70%。下面的示例假设一台专用的服务器的内存为1024M。
innodb_buffer_pool_size=700M
```
重启MySQL服务。

```bash
# service mysqld restart
```

# 设置和监控每个主机的总VM数限制

管理员应该监视每个集群中的虚拟机实例的总数，如果总量快达到hypervisor允许的最大虚拟机数量时，不再向此群集分配虚拟机。并且，要注意为主机预留一定的计算能力，以防止群集中有主机发生故障，因为发生故障的主机上的虚拟机需要重新部署在这些预留主机上。查阅选择hypervisor的文档，了解此hypervisor能支持的最大虚拟机数量，并将此数值设置在CloudStack的全局设置里。

监控每个群集里虚拟机的活跃程序，并将活跃虚拟机保持在一个安全线内。这样，CloudStack就能允许偶尔的主机故障。举个示例：如果集群里有N个主机，而你只能让其中任一主机的停机时间不超过特定时间。那么，你能在此集群部署的最多虚拟主机数量值为：(N-1) * (每主机最大虚拟量数量限值)。一旦群集中的虚拟机达到此数量，必须在CloudStack的用户界面中禁止向此群集分配新的虚拟机。

# 配置XenServer dom0的内存
配置XenServer为dom0分配更多的内存，可使XenServer处理更多的虚拟机。我们推荐为dom0设置的内存数值为2940 MB。至于如何操作，可以参阅如下URL： Citrix 知识库文章.。这篇文章同时适用于XenServer 5.6和6.0版本。
